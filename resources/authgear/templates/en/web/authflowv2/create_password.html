{{ template "authflowv2/__page_frame.html" . }}
{{ define "page-content" }}
{{ $is_password_field_error := false }}
{{ $is_confirm_password_field_error := false }}
{{ if .Error }}
  {{ if eq .Error.reason "NewPasswordTypo" }}
    {{ $is_confirm_password_field_error = true }}
  {{ else }}
    {{ $is_password_field_error = true }}
  {{ end }}
{{ end }}
<h1 class="screen-title">
  {{ template "v2-create-password-page-title" }}
</h1>
<form data-controller="password-policy" method="post" novalidate class="flex flex-col gap-y-4 mt-8">
{{ $.CSRFField }}
{{ if $.PasswordManagerUsername }}
<input style="display: none" aria-hidden="true" type="text" autocomplete="username" name="" value="{{ $.PasswordManagerUsername }}">
{{ end }}
{{ template "authflowv2/__password_field.html" (dict 
  "Name" "x_password"
  "Type" "new-password"
  "AutoFocus" $.ShouldFocusInput
  "PasswordRules" $.PasswordRulesString
  "Error" (ternary .Error nil $is_password_field_error)
)
}}
{{ template "authflowv2/__password_field.html" (dict
  "Name" "x_confirm_password"
  "Type" "confirm-password"
  "Error" (ternary .Error nil $is_confirm_password_field_error)
) }}
<button
	class="primary-btn"
	type="submit"
	name="x_action"
	value=""
	data-authgear-event="authgear.button.create_password"
>
{{ template "v2-button.continue" }}
</button>
</form>
{{ end }}
